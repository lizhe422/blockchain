## 以太坊——复活智能合约

**智能合约与虚拟机**

智能合约本质是一段运行在区块链上的代码，这段代码具备区块链去中心化、公开透明、不可篡改的特点。

以太坊虚拟机（EVM）是以太坊智能合约的运行环境。它不仅被沙箱封装起来，事实上它已经被完全隔离。

EVM的主要功能是将高级开发语言编写的智能合约编译成以太坊可以识别的字节码。

**账户**

以太坊又两类账户，分别是外部账户和合约账户

外部账户由私钥控制，每个账户有一对公钥和私钥，私钥用于签署交易，地址是由公钥决定的，用来接收用户转账。

将外部账户做一个简单的类比，外部账户的公钥相当于银行卡的卡号，而私钥相当于用户设置的密码，与银行卡不同的地方是

私钥一旦丢失无法找回。

合约账户是包含智能合约代码的账户，合约账户不有私钥文俊直接控制，而是由合约代码来控制的。合约账户的地址由创建合约者

的地址以及该地址发出的交易共同计算得出。

**交易**

以太坊种交易分为两类：一类是包含数字货币的交易数据，另一类是包含智能合约代码的交易数据。

以太坊中交易包含的内容由3种不同类型，分别是：

1. 转账交易：从一个账户向另一个账户发送以太币。
2. 创建智能合约交易：创建合约是只将合约部署到区块链上，也是通过发送交易来实现的。
3. 执行智能合约交易：该交易为了执行以及部署在区块链上的智能合约。

一笔转账交易矿工只需对双方账户余额进行修改，但一笔智能合约交易矿工需要在EVM虚拟机上运行这段代码，智能合约越复杂，

需要花费的Gas就越高。

**以太坊的未来在哪里**

**分片**

分片是一种数据库分区技术，常用来将数据量非常大的数据库分割为更小、更快、更容易管理的部分，这些被分割后的数据库称为“数据分片”。

分片技术常用来解决数据库数据过大吼带来数据管理、查询效率低下的问题。

以太坊种，由于每个节点都要存储所有的交易信息，导致以太坊单个节点的数据量越来越大，同事也限制了以太坊的扩展性。分片技术借鉴了数据库可扩展架构的一些思路，

将以太坊网络分成若干个分区，每个分区独立存储一些交易数据，这样特定节点只需处理对应分片中的交易，所有分片完成的交易量加起来将会远远超过现有的交易量。

采用分片技术，每个节点只需存储、处理一部分交易，进而解决区块链扩展问题。

分片技术的思路就是采用现代数据库分片思路，将每一笔交易都需要所有节点验证的模式改为只需要部分节点进行验证的模式，只要每笔交易验证的节点随机性够强，

并且节点足够多，那么系统的安全性还是可以保证的。

**Casper**

Casper作为一种权益证明机制共识协议，时任何拥有以太币的账户在合约中只要
