# 区块链是分布式系统，但不是说分布式系统就是区块链

CAP定理：指系统的一致性、可用性和分区容忍性不能同时得到保证。

一致性：每次数据读取操作都是最新写入的数据，数据的读取不存在任何延迟，这里指的是数据的强一致性。

可用性：每次系统请求都会收到正常响应，但不确保是最新的数据。

分区容忍性：网络分解为相对独立的子网，节点之间的通信不可保障。

## 拜占庭容错机制

区块链在设计上采用了拜占庭容错机制，拜占庭容错是一种对一致性要求极高的共识机制，在完全开放的环境下，实现了数据的一致性和安全性，为业务提供了一个可信的环境。

**什么是共识机制**

打个比方，

现在有一个中心数据库，所有客户端都能来查询，每个客户端权限都是一样，但如果要对数据库进行增删改，不好意思，每次只允许一个客户端来操作，

通俗讲，就是让数据库串行修改数据库。通过一个算法机制来抉择出操作的客户端。这个机制就是共识机制，

所谓的共识就是在人人平等的社会里需要大家共同形成一个共识，产生一个操作者、临时决策者，代表大家来进行中心化的操作，

大家按照这个共识来维持去中心化的网络世界。

区块链中的共识机制可以让系统在限定时间内完成对交易的验证和确认，对一笔交易，如果利益不相干的若干个节点能够达成共识，我们就可以认为全网对此也能够达成共识。

区块链信任的特点主要体现在区块链上的用户无须信任交易的另一方，无须信任任何一个中心化的机构，只需信任区块链提供的软件系统就可以实现交易，

这种自信任的基础就是区块链的共识机制。

共识机制的核心是记账权的争夺，设计思路是让恶意节点的攻击成本远远大于诚实节点的受益，基于利益的考虑，大家与其作恶白白损失金钱还不如老老实实记账。

**工作量证明机制中，** 全网通过竞猜随机数获取生产区块的资格，一旦某个节点作恶就会白白损失算力，无法成为合格的区块生产者，也无法获得奖励。

**权益证明机制中，** 节点被称为验证者，没有挖矿，节点通过验证交易则获取交易手续费，验证错误则没收押金。每次系统会根据抵押代币数量来随机选择验证者，

抵押代币越多则被选为验证者的概率越大。

**代理权益证明机制** 有点类似人民代表大会制度，由持币者选取21个节点参与区块生产和验证，每次参与记账的区块生产者是由持有代币的人选举产生的，如果节点作恶，

会被系统自动“投出”。
